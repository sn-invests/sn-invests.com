"use strict";(function(e){function n(){l();c();p();d()}function r(){t.current_section_index=t.current_section_index<=0?0:t.current_section_index-1;h()}function i(){t.current_section_index=t.current_section_index>=t.section_total-1?t.section_total-1:t.current_section_index+1;h()}function s(e){t.current_section_index=e;h()}function o(e){if(!t.is_scrolling){if(e.originalEvent.detail<0||e.originalEvent.wheelDelta>0){if(!v("up")){var n=t.current_section_content.position().top;t.current_section_content.css("top",n<=0?0:n+100)}else{t.delta--;if(Math.abs(t.delta)>=t.scroll_threshold)r()}}else{if(!v("down")){var n=t.current_section_content.position().top;t.current_section_content.css("top",n-100)}else{t.delta++;if(t.delta>=t.scroll_threshold)i()}}}return false}function u(e){if(t.drag_start!==null){return}if(e.originalEvent.touches)e=e.originalEvent.touches[0];t.drag_start=e.clientY;t.drag_content_top=t.current_section_content.position().top;t.drag_content=false}function a(n){if(t.drag_start===null){return}if(n.originalEvent.touches)n=n.originalEvent.touches[0];t.touch_delta=t.drag_start-n.clientY;t.touch_percentage=t.touch_delta/e(window).height();if(t.touch_percentage>0){if(!v("down")){t.drag_content=true;t.current_section_content.css("top",t.drag_content_top-t.touch_delta)}else{if(!t.drag_content)e(t.current_section).height(100-t.touch_percentage*100+"%").addClass("no_transition")}}else{if(!v("up")){t.drag_content=true;t.current_section_content.css("top",top<=0?0:t.drag_content_top-t.touch_delta)}else{if(!t.drag_content)e(t.previous_section).height(-t.touch_percentage*100+"%").addClass("no_transition")}}return false}function f(n){t.drag_start=null;if(n.originalEvent.touches)n=n.originalEvent.touches[0];e(t.current_section).removeClass("no_transition");e(t.previous_section).removeClass("no_transition");if(t.touch_percentage>=t.drag_treshold){!t.drag_content?i():h()}else if(Math.abs(t.touch_percentage)>=t.drag_treshold){!t.drag_content?r():h()}else{h()}t.touch_percentage=0}function l(){t.nav=e('<ul class="nav" />').appendTo("body");for(var n=0;n<t.section_total;n++){var r=e("<li />").data("index",n).appendTo(t.nav);var i=e(t.sections.get(n)).data("label");var o=e("<span>"+i+"</span>").appendTo(r);r.on("mouseup",function(t){t.stopPropagation();var n=e(this).data("index");s(n)})}}function c(){var n=t.nav.find("li").removeClass("current");var r=n.get(t.current_section_index);e(r).addClass("current")}function h(){t.delta=0;t.is_scrolling=true;setTimeout(function(){t.is_scrolling=false},300);t.sections.each(function(n,r){e(r).height(n>=t.current_section_index?"100%":0)});t.current_section=t.sections.get(t.current_section_index);t.current_section_content=e(t.current_section).find(".section_content");t.previous_section=t.sections.get(t.current_section_index-1);c();p()}function p(){var n="current_"+e(t.current_section).attr("class");e("body").attr("class",n)}function d(){var n="section_content_scrollable";var r=e(window).height();t.section_contents.each(function(t){var i=e(this);var s=i.outerHeight();s>=r?i.addClass(n).css("top",0):i.removeClass(n).css("top","50%")})}function v(n){if(t.current_section_content.length>0){var r=e(window).height();var i=t.current_section_content.outerHeight();var s=t.current_section_content.position().top;var o=s+i;if(n=="up"&&s<0)return false;if(n=="down"&&o>r)return false}return true}function m(e){var t=e.position().top;e.css("top",t)}function g(e){var t=e.width();e.height(t)}function y(){d()}function b(){d()}var t={delta:0,sections:e("section"),section_total:e("section").length,section_contents:e(".section_content"),current_section:e("section").get(0),current_section_content:e(e("section").get(0)).find(".section_content"),current_section_index:0,previous_section:null,scroll_threshold:1,drag_treshold:.15,drag_content:false,drag_content_top:0,touch_delta:0,touch_percentage:0,drag_start:null,is_scrolling:false};e("[data-scroll-next]").on("click touchstart",function(e){e.stopPropagation();e.preventDefault();i()});e("[data-scroll-prev]").on("click touchstart",function(e){e.preventDefault();scroll_prev()});e("[data-scroll-to]").on("click touchstart",function(t){t.preventDefault();var n=parseInt(e(this).attr("data-scroll-to"));s(n)});e("[data-fixed]").each(function(){m(e(this))});e("[data-equal-height]").each(function(){var t=e(this);g(t);e(window).on({resize:function(){g(t)}})});e(window).on({resize:y,"DOMMouseScroll mousewheel":o,orientationchange:b});e(document).on({touchstart:u,touchmove:a,touchend:f});n()})(jQuery);